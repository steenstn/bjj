(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports=n(283)},113:function(e,t,n){},115:function(e,t,n){},117:function(e,t,n){},274:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(21),i=n.n(o),s=(n(113),n(16)),c=n(22),l=n(18),u=n(17),m=n(19),h=(n(115),n(287)),d=n(286),p=n(27),f=n(284),b=n(63),g=n.n(b),E=n(62),j=n.n(E),v=(n(117),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.state={connectedToBackend:!1,loginSuccessful:!1,errorMessage:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://bjjtraining.herokuapp.com/test").then(function(t){200===t.status&&e.setState({connectedToBackend:!0})})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target),a={};n.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a);fetch("https://bjjtraining.herokuapp.com/user/login",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var n=e.json;e.response.ok?(localStorage.setItem("token",n.token),t.setState({loginSuccessful:!0}),t.props.history.push("/dashboard")):t.setState({errorMessage:"Invalid username or password",loginSuccessful:!1})},function(e){console.log("error",e)})}},{key:"render",value:function(){return r.a.createElement("div",{class:"center"},r.a.createElement("p",null,this.state.connectedToBackend?"Connected":"Connecting.."),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(g.a,{id:"username",label:"Username",name:"username",type:"text"}),r.a.createElement("br",null),r.a.createElement(g.a,{id:"password",label:"Password",name:"password",type:"password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"outlined",type:"submit"},"Login")),r.a.createElement(f.a,{to:"/register"},"Register"),r.a.createElement("p",null,this.state.loginSuccessful?"Login successful":this.state.errorMessage))}}]),t}(a.Component)),O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleVisible=function(e){var t=n.state.showItems.slice();t[e]=!t[e],n.setState({showItems:t})},n.state={showItems:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.moves;return r.a.createElement("div",null,r.a.createElement("ul",null,t.map(function(t,n){return r.a.createElement("li",{key:t.id,onClick:function(){return e.toggleVisible(n)}},t.name,e.state.showItems[n]?": "+t.description:"")})))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target),a={};t.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a),o=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/moves/new",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(o)}}).then(function(e){return e.json()}).then(n.handleForm.current.reset())},n.render=function(){return r.a.createElement("form",{onSubmit:n.handleSubmit,ref:n.handleForm},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{id:"name",name:"name",type:"text"}),r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{id:"description",name:"description",type:"text"}),r.a.createElement("button",null,"Add move"))},n.handleForm=r.a.createRef(),n}return Object(m.a)(t,e),t}(a.Component),y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={moves:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/moves",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){e.setState({moves:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement(O,{moves:this.state.moves}))}}]),t}(a.Component),D=n(107),k=(n(272),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),!n.state.inputErrorLengthMin&&!n.state.inputErrorDate){var t=new FormData(e.target),a={};t.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a),o=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/trainingsessions/new",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(o)}}).then(function(e){return e.json()}).then(function(e){n.props.onNewTrainingSession(e)}).then(n.handleForm.current.reset())}},n.inputValidationMinutes=function(e){e.preventDefault();var t=e.target.value;/^(|[1-9][0-9]*)$/.test(t)&&""!==t?n.setState({inputErrorLengthMin:!1}):n.setState({inputErrorLengthMin:!0}),n.setState({lengthMin:e.target.value})},n.inputValidationDate=function(e){null===e?n.setState({inputErrorDate:!0,currentDate:e}):n.setState({inputErrorDate:!1,currentDate:e})},n.handleForm=r.a.createRef(),n.state={lengthMin:75,inputErrorLengthMin:!1,inputErrorDate:!1,currentDate:new Date},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,ref:this.handleForm},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement(D.a,{id:"date",name:"date",selected:this.state.currentDate,onChange:this.inputValidationDate,dateFormat:"yyyy-MM-dd"}),r.a.createElement("label",{htmlFor:"length"},"Length(min)"),r.a.createElement("input",{id:"lengthMin",name:"lengthMin",value:this.state.lengthMin,type:"text",onChange:this.inputValidationMinutes}),r.a.createElement("label",{htmlFor:"trainingType"},"Training type"),r.a.createElement("select",{id:"trainingType",name:"trainingType"},r.a.createElement("option",{value:"GI"},"GI"),r.a.createElement("option",{value:"NO_GI"},"NO_GI"),r.a.createElement("option",{value:"OPEN_MAT"},"OPEN_MAT")),r.a.createElement("button",null,"Add session"),this.state.inputErrorLengthMin&&r.a.createElement("p",{style:{color:"red"}},"Length must be an integer (above 0)."),this.state.inputErrorDate&&r.a.createElement("p",{style:{color:"red"}},"Please pick a date."))}}]),t}(a.Component)),w=n(102),T=n.n(w),M=n(105),C=n.n(M),I=n(103),N=n.n(I),F=n(104),L=n.n(F),B=(n(274),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleDelete=function(e){var t=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com"+"/trainingsessions/".concat(e,"/delete"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json; charset=utf-8"}}).then(function(){var t=n.state.sessions.filter(function(t){return t.id!==e});n.setState({sessions:t,deleteDialogOpen:!1})})},n.openDeleteDialog=function(e){n.setState({deleteDialogOpen:!0,sessionID:e})},n.closeDeleteDialog=function(){n.setState({deleteDialogOpen:!1})},n.render=function(){var e=n.props.sessions,t=n.state,a=t.deleteDialogOpen,o=t.sessionID;return e?r.a.createElement("div",null,r.a.createElement("ul",{className:"list"},e.map(function(e){return r.a.createElement("li",{className:"listEntry",key:e.id},e.date," Type: ",e.trainingType," Length: ",e.lengthMin," min",r.a.createElement("button",{className:"deleteButton",onClick:function(){return n.openDeleteDialog(e.id)},key:e.id},"x"))})),r.a.createElement(T.a,{open:a,onClose:n.closeDeleteDialog,"aria-describedby":"alert-dialog-description"},r.a.createElement(N.a,null,r.a.createElement(L.a,{id:"alert-dialog-description"},"Are you sure you want to delete this training session?")),r.a.createElement(C.a,null,r.a.createElement("button",{onClick:n.closeDeleteDialog},"No, keep this session"),r.a.createElement("button",{onClick:function(){return n.handleDelete(o)}},"Yes, delete this session")))):r.a.createElement("div",null,"Loading...")},n.state={error:null,isLoaded:!1,sessions:[],deleteDialogOpen:!1,sessionID:""},n}return Object(m.a)(t,e),t}(a.Component)),A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/trainingsessions",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){n.setState({isLoaded:!0,sessions:e})},function(e){n.setState({isLoaded:!0,error:!0})})},n.handleNewTrainingSession=function(e){var t=n.state.sessions.slice();t.push(e),n.setState({sessions:t})},n.render=function(){return n.state.error?r.a.createElement("div",null,r.a.createElement(k,{onNewTrainingSession:n.handleNewTrainingSession}),r.a.createElement("p",null,"Could not load training sessions..")):r.a.createElement("div",null,r.a.createElement(k,{onNewTrainingSession:n.handleNewTrainingSession}),r.a.createElement(B,{sessions:n.state.sessions}))},n.state={error:!1,isLoaded:!1,sessions:[]},n}return Object(m.a)(t,e),t}(a.Component),P=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Moves"),r.a.createElement(y,null),r.a.createElement(A,null))}}]),t}(a.Component),x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.state={registrationSuccessful:!1,errorMessage:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target),a={};n.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a);fetch("https://bjjtraining.herokuapp.com/user/register",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var n=e.json;e.response.ok?t.setState({registrationSuccessful:!0}):t.setState({errorMessage:n.message,registrationSuccessful:!1})},function(e){console.log("error",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username"),r.a.createElement("input",{id:"username",name:"username",type:"text"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password"}),r.a.createElement("button",null,"Register")),r.a.createElement("p",null,this.state.registrationSuccessful?"Registration successful":this.state.errorMessage))}}]),t}(a.Component),G=function(){return r.a.createElement("main",null,r.a.createElement(h.a,null,r.a.createElement(d.a,{path:"https://steenstn.github.io/bjj",component:v}),r.a.createElement(d.a,{path:"/bjj",component:v}),r.a.createElement(d.a,{exact:!0,path:"/",component:v}),r.a.createElement(d.a,{path:"/register",component:x}),r.a.createElement(d.a,{path:"https://steenstn.github.io/bjj/dashboard",component:P}),r.a.createElement(d.a,{path:"/dashboard",component:P})))},J=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(285);i.a.render(r.a.createElement(V.a,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,2,1]]]);
//# sourceMappingURL=main.3390df6f.chunk.js.map