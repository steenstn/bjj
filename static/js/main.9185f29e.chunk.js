(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(23),i=n.n(o),s=(n(88),n(9)),l=n(14),c=n(11),u=n(10),h=n(12),m=(n(90),n(213)),d=n(212),p=n(25),f=n(210),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.state={connectedToBackend:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://bjjtraining.herokuapp.com/test").then(function(t){200===t.status&&e.setState({connectedToBackend:!0})})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target),a={};n.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a);fetch("https://bjjtraining.herokuapp.com/user/login",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),console.log("yay",e),t.props.history.push("/dashboard")},function(e){console.log("error",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.state.connectedToBackend?"Connected":"Connecting.."),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username"),r.a.createElement("input",{id:"username",name:"username",type:"text"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password"}),r.a.createElement("button",null,"Login")),r.a.createElement(f.a,{to:"/register"},r.a.createElement("button",null,"Register new user")))}}]),t}(a.Component),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleVisible=function(e){var t=n.state.showItems.slice();t[e]=!t[e],n.setState({showItems:t})},n.state={showItems:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.moves;return r.a.createElement("div",null,r.a.createElement("ul",null,t.map(function(t,n){return r.a.createElement("li",{key:t.id,onClick:function(){return e.toggleVisible(n)}},t.name,e.state.showItems[n]?": "+t.description:"")})))}}]),t}(a.Component),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={moves:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/moves",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){e.setState({moves:t})})}},{key:"render",value:function(){return r.a.createElement(g,{moves:this.state.moves})}}]),t}(a.Component),j=n(82),v=(n(98),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),!n.state.inputErrorLengthMin&&!n.state.inputErrorDate){var t=new FormData(e.target),a={};t.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a),o=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/trainingsessions/new",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(o)}}).then(function(e){return e.json()}).then(function(e){n.props.onNewTrainingSession(e)}).then(n.handleForm.current.reset())}},n.inputValidationMinutes=function(e){e.preventDefault();var t=e.target.value;/^(|[1-9][0-9]*)$/.test(t)&&""!==t?n.setState({inputErrorLengthMin:!1}):n.setState({inputErrorLengthMin:!0}),n.setState({lengthMin:e.target.value})},n.inputValidationDate=function(e){null===e?n.setState({inputErrorDate:!0,currentDate:e}):n.setState({inputErrorDate:!1,currentDate:e})},n.handleForm=r.a.createRef(),n.state={lengthMin:75,inputErrorLengthMin:!1,inputErrorDate:!1,currentDate:new Date},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,ref:this.handleForm},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement(j.a,{id:"date",name:"date",selected:this.state.currentDate,onChange:this.inputValidationDate,dateFormat:"yyyy-MM-dd"}),r.a.createElement("label",{htmlFor:"length"},"Length(min)"),r.a.createElement("input",{id:"lengthMin",name:"lengthMin",value:this.state.lengthMin,type:"text",onChange:this.inputValidationMinutes}),r.a.createElement("label",{htmlFor:"trainingType"},"Training type"),r.a.createElement("select",{id:"trainingType",name:"trainingType"},r.a.createElement("option",{value:"GI"},"GI"),r.a.createElement("option",{value:"NO_GI"},"NO_GI"),r.a.createElement("option",{value:"OPEN_MAT"},"OPEN_MAT")),r.a.createElement("button",null,"Add session"),this.state.inputErrorLengthMin&&r.a.createElement("p",{style:{color:"red"}},"Length must be an integer (above 0)."),this.state.inputErrorDate&&r.a.createElement("p",{style:{color:"red"}},"Please pick a date."))}}]),t}(a.Component)),O=n(76),S=n.n(O),y=n(80),D=n.n(y),k=n(78),w=n.n(k),T=n(79),M=n.n(T),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleDelete=function(e){var t=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com"+"/trainingsessions/".concat(e,"/delete"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json; charset=utf-8"}}).then(function(){var t=n.state.sessions.filter(function(t){return t.id!==e});n.setState({sessions:t,deleteDialogOpen:!1})})},n.openDeleteDialog=function(e){n.setState({deleteDialogOpen:!0,sessionID:e})},n.closeDeleteDialog=function(){n.setState({deleteDialogOpen:!1})},n.render=function(){var e=n.props.sessions,t=n.state,a=t.deleteDialogOpen,o=t.sessionID;return e?r.a.createElement("div",null,r.a.createElement("ul",null,e.map(function(e){return r.a.createElement("li",{key:e.id},e.id," ",e.date," ",e.trainingType," ",e.lengthMin," ",r.a.createElement("button",{onClick:function(){return n.openDeleteDialog(e.id)},key:e.id},"x"))})),r.a.createElement(S.a,{open:a,onClose:n.closeDeleteDialog,"aria-describedby":"alert-dialog-description"},r.a.createElement(w.a,null,r.a.createElement(M.a,{id:"alert-dialog-description"},"Are you sure you want to delete this training session?")),r.a.createElement(D.a,null,r.a.createElement("button",{onClick:n.closeDeleteDialog},"No, keep this session"),r.a.createElement("button",{onClick:function(){return n.handleDelete(o)}},"Yes, delete this session")))):r.a.createElement("div",null,"Loading...")},n.state={error:null,isLoaded:!1,sessions:[],deleteDialogOpen:!1,sessionID:""},n}return Object(h.a)(t,e),t}(a.Component),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=localStorage.getItem("token");fetch("https://bjjtraining.herokuapp.com/trainingsessions",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){n.setState({isLoaded:!0,sessions:e})},function(e){n.setState({isLoaded:!0,error:!0})})},n.handleNewTrainingSession=function(e){var t=n.state.sessions.slice();t.push(e),n.setState({sessions:t})},n.render=function(){return n.state.error?r.a.createElement("div",null,r.a.createElement(v,{onNewTrainingSession:n.handleNewTrainingSession}),r.a.createElement("p",null,"Could not load training sessions..")):r.a.createElement("div",null,r.a.createElement(v,{onNewTrainingSession:n.handleNewTrainingSession}),r.a.createElement(C,{sessions:n.state.sessions}))},n.state={error:!1,isLoaded:!1,sessions:[]},n}return Object(h.a)(t,e),t}(a.Component),N=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Moves"),r.a.createElement(E,null),r.a.createElement(I,null))}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.state={registrationSuccessful:!1,errorMessage:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target),a={};n.forEach(function(e,t){a[t]=e});var r=JSON.stringify(a);fetch("https://bjjtraining.herokuapp.com/user/register",{method:"POST",body:r,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var n=e.json;e.response.ok?t.setState({registrationSuccessful:!0}):t.setState({errorMessage:n.message,registrationSuccessful:!1})},function(e){console.log("error",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username"),r.a.createElement("input",{id:"username",name:"username",type:"text"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password"}),r.a.createElement("button",null,"Register")),r.a.createElement("p",null,this.state.registrationSuccessful?"Registration successful":this.state.errorMessage))}}]),t}(a.Component),F=function(){return r.a.createElement("main",null,r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"https://steenstn.github.io/bjj",component:b}),r.a.createElement(d.a,{path:"/bjj",component:b}),r.a.createElement(d.a,{exact:!0,path:"/",component:b}),r.a.createElement(d.a,{path:"/register",component:L}),r.a.createElement(d.a,{path:"https://steenstn.github.io/bjj/dashboard",component:N}),r.a.createElement(d.a,{path:"/dashboard",component:N})))},B=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(211);i.a.render(r.a.createElement(P.a,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,n){e.exports=n(209)},88:function(e,t,n){},90:function(e,t,n){}},[[83,2,1]]]);
//# sourceMappingURL=main.9185f29e.chunk.js.map